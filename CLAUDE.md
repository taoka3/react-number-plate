# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

- `npm run dev` - Start development server with Vite
- `npm run build:lib` - Build the component library for production (creates UMD and ES modules in `dist/`)
- `npm run build` - Build both TypeScript and library
- `npm run preview` - Preview the built demo

## Project Architecture

This is a React component library that exports a single `NumberPlate` component for Japanese license plates.

### Key Components

- **NumberPlate.tsx** (`src/NumberPlate.tsx`) - Main component that renders an interactive Japanese license plate form
  - Props: `value` (string), `onChange` ((value: string) => void), `separate` (string, default ' '), `color` (string, default 'white'), `disabled` (boolean), `required` (boolean)
  - Uses React hooks: `useState`, `useEffect`, `useCallback`
  - Supports 4 color themes: white, green, yellow, black
  - Handles Japanese regions, classification numbers, hiragana characters, and license numbers
  - Contains comprehensive region data organized by geographical areas (北海道, 東北, 関東, etc.)

### Build Configuration

- Uses Vite with React plugin for development and building
- Configured as a library with entry point at `src/index.ts`
- Generates TypeScript declarations using `vite-plugin-dts`
- Builds both UMD (`react-number-plate.umd.js`) and ES (`react-number-plate.es.js`) formats
- React and ReactDOM are externalized as peer dependencies
- CSS is output as `style.css` with embedded Japanese fonts
- Nested CSS syntax is used throughout the project

### Library Architecture

- Supports both named imports and default import
- Entry point (`src/index.ts`) exports both the component and props interface
- TypeScript type definitions exported from component file
- Compatible with React 18+ and React 19+
- Client-side only (uses React hooks, no SSR support)

### Styling

- Uses CSS custom properties for theming
- Includes custom Japanese fonts: HinaMincho, ZenKakuGothicAntique, TrmFontJB
- Fonts are embedded in CSS as base64 (approximately 12MB total)
- Responsive design with fixed width (16.5rem) number plate layout
- Color variants use CSS variables for consistent theming
- Uses nested CSS syntax for better maintainability
- Dark mode support by default with light mode media query

### File Structure

- `src/index.ts` - Library entry point that exports NumberPlate component and props
- `src/NumberPlate.tsx` - Main component implementation with TypeScript
- `src/NumberPlate.css` - Component styles and theme definitions (nested CSS)
- `src/assets/` - Custom Japanese fonts for authentic appearance
- `src/App.tsx` - Demo application
- `src/App.css` - Demo application styles (nested CSS, dark mode default)
- `dist/` - Built library files (generated by `npm run build:lib`)

### Usage in Projects

**React:**
```tsx
import { NumberPlate } from 'react-number-plate';
import 'react-number-plate/style.css';

<NumberPlate value={value} onChange={setValue} color="white" />
```

**Next.js (App Router):**
```tsx
'use client';  // Required: uses React hooks
import { NumberPlate } from 'react-number-plate';
import 'react-number-plate/style.css';

<NumberPlate value={value} onChange={setValue} color="white" />
```

The component handles automatic normalization of incomplete license plate values and provides region-specific dropdowns for Japanese prefectures organized by geographical regions.

## Important Notes

- This is a **client-side only** component (uses React hooks)
- Must use `'use client'` directive in Next.js App Router
- CSS file is large (~12MB) due to embedded Japanese fonts
- Supports TypeScript with full type definitions
- Compatible with both React 18 and React 19
